<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Font (IBM Plex Sans Condensed) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet"
    >

    <!-- Bootstrap (5.2.3) -->
    <link rel="stylesheet" href="../../css/bootstrap.css">  <!-- %UPDATE% -->
    <script defer src="../../js/bootstrap.bundle.min.js"></script>  <!-- %UPDATE% -->

    <!-- Favicon. -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="../../css/website-base.css">  <!-- %UPDATE% -->
    <title>Pandas Tutorials: Working with Databases</title>
</head>
<body>
    <!-- Header for title of webpage. -->
    <header class="container-fluid">
        <div class="row py-4 bg-primary">
            <h1 class="col text-center text-white">
                PANDAS TUTORIALS
            </h1>
        </div>
    </header>
    <!--- Navigation banner. -->
    <nav class="navbar navbar-expand-lg sticky-top py-0 navbar-dark bg-secondary">
        <!-- Container for entire navbar. -->
        <div class="container-fluid justify-content-end px-1">
            <!-- Hamburger menu that appears when screen gets smaller. -->
            <button class="navbar-toggler my-1" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Container for navbar items. -->
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item mx-4">
                        <a class="nav-link text-center" href="../../index.html">Home</a>  <!-- %UPDATE% -->
                    </li>
                    <li class="nav-item mx-4">
                        <a class="nav-link text-center" href="../../tutorials.html">Tutorials</a>  <!-- %UPDATE% -->
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Outer wrapper for main content. -->
    <div class="container-fluid" id="contentWrapper">
        <div class="row">
            <div class="col-md-1 col-lg-2 col-xxl-3"></div>
            <!-- Container for main content. -->
            <div class="col-12 col-md-10 col-lg-8 col-xxl-6 my-md-4 py-3 py-sm-4 px-0 px-sm-3 bg-white">
                <section class="container-fluid">
                    <!-- Title. -->
                    <div class="row">
                        <h2 class="col mb-3 mx-2 mx-sm-1 text-start border-start border-3 border-secondary text-primary">
                            Pandas Tutorials: Working with Databases
                        </h2>
                    </div>
                    <!-- Title/image. -->
                    <div class="row">
                        <div class="d-flex justify-content-center">
                            <img
                                class="img-fluid"
                                src="../../imgs/pandas-databases.webp"
                                alt="[Enter image here]"
                                width=100%
                            >  <!-- %UPDATE% -->
                        </div>
                    </div>
                    <!-- Description. -->
                    <div class="row mt-2 mb-3">
                        <div class="col">
                            <h5><b>DISCLAIMER: Before starting this tutorial, you should have a basic knowledge of Relational Databases and SQL.</b></h5>
                            <p class="pt-2">
                                Text Files are great for when you are getting started with Pandas or working on a small-scale Data Science project. However, once you start collecting data on a regular basis, you'll need a database. This tutorial will cover the following learning objectives:
                            </p>
                            <ul>
                                <li>How to Use SQLAlchemy with Pandas</li>
                                <li>How to Execute a SQL Query Against a Database with Pandas</li>
                                <li>How to Append a DataFrame to an Existing Database Table</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Use SQLAlchemy with Pandas</h2> <br>
                        <iframe width="650" height="400" src="https://www.youtube.com/embed/M-4EpNdlSuY?start=0&end=136" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><br>
                        <h4 class="pt-4">Summary</h4>
                        <ul>
                            <li class="pt-1">The <b><i>SQLAlchemy</i></b> library is a popular tool to connect Relational Databases to Python via an API. The most popular database supported by this library are MySQL, PostgreSQL, and Oracle.</li>
                            <li class="pt-2">Before getting started with SQLAlchemy, you'll need to install it into your local environment AND the database driver. Run the following code to get started: <br>
                                <code>pip install sqlalchemy</code><br><br>
                                <b>MySQL:</b><br>
                                <code>pip install pymysql</code><br><br>
                                <b>PostgreSQL:</b><br>
                                <code>pip install psycopg2</code></li>
                            <li class="pt-2">Once you have the correct libraries installed, you need to create the connection string for the connection engine. Run the following code to continue: <br>
                                <code>from sqlalchemy import create_engine</code><br><br>
                                <b>MySQL:</b><br>
                                <code>engine = create_engine('mysql+pymysql://[username]:[password]@localhost:3306/[database_name]')</code><br><br>
                                <b>PostgreSQL:</b><br>
                                <code>engine = create_engine('postgresql+psycopg2://[username]:[password]@localhost:5432/[database_name]')</code></li>

                            <li class="pt-2"><b>NOTE:</b> If the file you want to use is not in your working directory, you'll need to specify either the Absolute or Relative file path.</li>
                            </ul>
                    <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Execute a SQL Query Against a Database with Pandas</h2> <br>
                    <iframe width="650" height="400" src="https://www.youtube.com/embed/M-4EpNdlSuY?start=137&end=345" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><br>
                    <h4 class="pt-4">Summary</h4>
                    <ul>
                        <li class="pt-2">When you have established the connection to your database, the <b><i>read_sql_table</i></b> mathod can be used to view the contents of a table (SQL Equivalent: <b>SELECT * FROM table</b>). This is used with the following syntax: <br>
                            <code>pd.read_sql_table('table_name', con=[engine_variable])</code></li>
                        <li class="pt-2">The <b><i>read_sql_table</i></b> method also contains a parameter that lets you specify the columns to return from the table (SQL Equivalent: <b>SELECT [columns] FROM table</b>). This is used with the following syntax: <br>
                            <code>pd.read_sql_table('table_name', con=[engine_variable], columns=['column1', 'column2', 'column3'])</code></li>
                        <li class="pt-2">The <b><i>read_sql_query</i></b> method is used to run a raw SQL query against a database connection. This method is used with the following syntax: <br>
                            <code>pd.read_sql_query('enter query here', con=[engine_variable])</code></li>
                        <li class="pt-2"><b>NOTE: </b>Although the <b><i>read_sql_query</i></b> works when reading a running a raw SQL query against a database connection, the <b><i>read_sql</i></b> method is much simpler and more commonly used. This method has the same syntax as the <b><i>read_sql_query</i></b> method.</li>
                        </ul>
                    <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Convert a JSON File into a DataFrame</h2> <br>
                    <iframe width="650" height="400" src="https://www.youtube.com/embed/M-4EpNdlSuY?start=478&end=630" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></iframe><br><br>
                    <h4 class="pt-4">Summary</h4>
                    <ul>
                        <li class="pt-1">The <b><i>to_sql</i></b> method is used to upload a Dataframe either as a new table or added to an existing table. This method is used with the following syntax: <br>
                            <code>dataframe.to_sql('table_name', con=[engine_variable])</code></li>
                        <li class="pt-2">When using the <b><i>to_sql</i></b> method to upload a DataFrame as a new table, you should NEVER include the DataFrame's index. This is can easily cause confusion in your relational model. To exclude the index, use the following syntax: <br>
                            <code>dataframe.to_sql('table_name', con=[engine_variable], index=False)</code></li>
                        <li class="pt-2">When appending a DataFrame to an existing table, the <b><i>to_sql</i></b> method offers a parameter called <b><i>if_exists</i></b>. This parameter gives you the following options: <b>Fail</b> (stop code execution if the table already exists, <b>Replace</b> (drop the table, recreate the table, and insert the DataFrame's contents), and <b>Append</b> (add the DataFrame's contents to the end of the existing table). This is used with the following syntax: <br>
                            <code>dataframe.to_sql('table_name', con=[engine_variable], index=False, if_exists=["fail", "replace", "append"])</code></li>
                        </ul><br>
                    
                        <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary" id="exercise">Exercise</h2>
                        <p><b>Congratulations!</b> You just completed the Working with Text Files Tutorial! To help test your knowledge, let's
                            practice Reading and Writing some Text Files into and from DataFrames.</i></b>
                            </i></b>
                            <br>**<b><i>It's highly recommended that you
                                complete the exercise outlined in the previous tutorial before beginning this exercise.**</i></b>
                        </p>
                        <h4 class="pt-3">Instructions:</h4>
                        <ol>
                            <li class="pt-2">Open your IDE (e.g., VS Code, PyCharm, Spyder).</b></li>
                            <li class= "pt-2">Create a New Jupyter Notebook, or similar Notebook Environment. Name it "text-files.ipynb"</li>
                            <li class="pt-2">Using either MySQL or Oracle, create a database with the following configurations: </li>
                            <ul>
                                <li><b>Username:</b> test</li>
                                <li><b>password:</b> test</li>
                                <li><b>Database Name:</b> ecommerce_shop</li>
                                <li><b>Schema:</b>
                                    <ul>
                                        <li>Customers
                                            <ul>
                                                <li>id (Integer Primary Key)</li>
                                                <li>first_name (VARCHAR(50) NOT NULL)</li>
                                                <li>last_name (VARCHAR(50) NOT NULL)</li>
                                                <li>phone_num (CHAR(10) NOT NULL)</li>
                                            </ul>
                                        </li>
                                        <li>Orders
                                            <ul>
                                                <li>id (Integer Primary Key)</li>
                                                <li>num_items (Integer NOT NULL)</li>
                                                <li>total_price (Integer NOT NULL)</li>
                                                <li>order_date (DATE NOT NULL)</li>
                                                <li>status (VARCHAR(25) IN('Completed', 'In Progress', 'Cancelled'))</li>
                                                <li>customer_id (Integer Foreign Key References id column in Customers Table)</li>
                                            </ul>
                                        </li>
                                    </ul></li>
                            </ul>
                            <li>Fill in the Database Tables with Dummy Data</li>
                            <li class="pt-2">In the Notebook, complete the following tasks:</li>
                            <ol type="a">
                                <li class="pt-2"><b>Create a Connection to your Database (Answer will vary).</b></li>
                                <li class="pt-2"><b>View All the Data in the "Customers" Table.</b></li>
                                <li class="pt-2"><b>View All the Data in the "Orders Table".</b></li>
                                <li class="pt-2"><b>Write a SQL Query that shows the Customer's First and Last Names and the Date of their Most Recent Order. Output the Result as a DataFrame.</b></li>
                                <li class="pt-2"><b>Write a SQL Query that shows the Top 5 Most Expensive Orders. Output the Result as a DataFrame.</b></li>
                                <li class="pt-2"><b>Export the Results of the Query Produced in Step "d" to a New Table Called "most_recent_orders".</b></li>
                            </ol>
                            <li class="pt-4"><b>Exercise Completed! Click <a href="./Database-Connections-Answer-Key.html">here</a> to view the answers.</b></li>
                            <div class="col">
                                <p class="pt-4">Have any issues with the above exercise? Post your question on Discord!</p>
                            </div>
                        </ol>
                    <!-- Previous/Next Topic buttons. -->
                    <div class="row mt-4 mt-md-5 mb-2 px-3">
                        <a
                            class="col-12 col-sm-4 btn btn-outline-primary mb-3 mb-sm-0 py-2 fs-5"
                            href="./Dataframe-Functions.html">
                            Previous Topic
                        </a>
                        <div class="col-0 col-sm-4"></div>
                        <a
                            class="col-12 col-sm-4 btn btn-outline-primary py-2 fs-5"
                            href="./Database-Connections.html">
                            Next Topic
                        </a>
                    </div>
            </section>
        </div>
        <div class="col-md-1 col-lg-2 col-xxl-3"></div>
    </div>
</div>
<!-- Footer at bottom of page. -->
<footer class="container-fluid bg-secondary">
    <div class="row align-items-center h-100">
        <h4 class="col m-0 text-center text-white">
            © 2023 Data Science Club @ UVU
        </h4>
    </div>
</footer>
</body>
</html>
