<!DOCTYPE html>
<link rel="stylesheet" href="tutorials.css">
<title>SQL Tutorials: Subqueries</title>
<header>
<h1 style="text-align:center;">SQL Tutorials</h1>
    <div class="navbar">
        <a href="/Tutorials/SQLTutorials.html">Return to Home</a>
        <div class="dropdown" style="margin-left:80px;">
            <button class="dropbtn" style="margin-left:80px;">Learning Paths
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content" style="min-width:150px;margin-left:5.2%;">
            <a href="DSBeginner.html">Data Science</a>
            <a href="DSIntermediate.html">Data Engineering</a>
            <a href="DSAdvanced.html">Software Engineering</a>
            <a href="Projects.html">Data Analytics</a>
          </div>
        </div>
        <div class="dropdown" style="margin-left:0px;">
            <button class="dropbtn" style="margin-left:60px;">Challenges
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content" style="max-width:190px;margin-left:4%;">
            <a href="DEBeginner.html">Beginner</a>
            <a href="DEIntermediate.html">Intermediate</a>
            <a href="DEAdvanced.html">Advanced</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="dropbtn">Projects
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content" style="min-width:170px;margin-left:5.2%;">
            <a href="SEBeginner.html">Beginner</a>
            <a href="SEIntermediate.html">Intermediate</a>
            <a href="SEAdvanced.html">Advanced</a>
          </div>
        </div>
        <div class="dropdown" style="margin-left:0px;">
            <button class="dropbtn" style="margin-left:60px;">Related Topics
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content" style="min-width:155px;margin-left:4.5%;">
            <a href="DABeginner.html">Python</a>
            <a href="DAIntermediate.html">NoSQL Databases</a>
            <a href="DAAdvanced.html">Tableau</a>
            <a href="Projects.html">Pandas</a>
          </div>
        </div>
      </div>
  </header>
  <div class="wrapperTutorials" style="width:1200px;">
    <section>
      <h2><u>INTERMEDIATE SQL: SUBQUERIES</u></h2><br><br>
      <h3 style="margin-left:99px;"><b><u>Introduction</u></b></h3>
      <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        Welcome to the first tutorial in the Intermediate section of this learning series! In this tutorial, we will be discussing the semantics and use cases behind subqueries in SQL. <b><i>SUBQUERIES</i></b> are queries that are nested inside a master SQL SELECT statement and. These provide more flexibility for filtering and aggregating data.
      </p>
      <h3 style="margin-left:99px;"><b><u>New Keywords</u></b></h3>
      <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        Before we jump in, let's take a look at some of the new keywords we'll be using in this tutorial:
        <ul style="margin-left:110px;">
            <li style="line-height:25px;"><b>LIKE: </b>This is used to conduct a "fuzzy" match between strings. This is primarily used to search for text that contain<br>
                &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;certain substrings and unique characters.</li>
            <li style="line-height:25px;"><b>IN: </b>This is used to find specific items in a column. This can be used with strings and integers.</li>
            <li style="line-height:30px;"><b>HAVING: </b>This is used in conjunction with aggregate functions. Similar to the WHERE clause this sets a filter for the data to be returned<br>
            &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;but can only work with NUMERICAL columns or columns that have an aggregate function assigned to it.</li>
        </ul>
        <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">Now that you are familiar with some additional querying features, let's look into how and when to use subqueries:</p>
    </p>
    </div>

                                                       <!-- Select Clause -->
    <div class="wrapperTutorials" style="width:1200px;">
        <section>
      <h3 style="margin-left:99px;font-size:30px;"><b>SUBQUERIES IN THE SELECT CLAUSE</b></h3>
      <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        When you're wanting to select a column from another table and you don't like joins, then a subquery in the SELECT clause is your next best option. As you may notice from the example below, this isn't the most readable line of code, so it's best to avoid this type of subquery. As mentioned before, this type of subquery has the following stipulations:
        <ul style="margin-left:110px;">
            <li style="line-height:25px;">The subquery must only contain ONE column.</li>
            <li style="line-height:25px;">If there is an aggregate function included, there must be a join clause in the subquery to ensure the queries are on the same level of detail.</li>
        </ul>
        </p>
      <h4 style="margin-left:99px;font-size:22px;"><b>Example</b></h4>
      <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        &ensp;&ensp;&ensp;SELECT reportID, totalSales, foodSales, cleaningSales, clothingSales,<br>
        &ensp;&ensp;&ensp;<b>(SELECT storeName FROM stores WHERE stores.storeID = salesReports.state) AS storeName, </b>storeID<br>
        &ensp;&ensp;&ensp;FROM salesReports<br>
        <h4 style="margin-left:99px;font-size:22px;"><b>Output</b></h4>
        <img style="margin-left:99px;" src="Images/selectsubex.jpg">
        </p><br>
    </section>
    </div>
                                                        <!-- From Clause -->
    <div class="wrapperTutorials" style="width:1200px;">
        <section>
        <h3 style="margin-left:99px;font-size:30px;"><b>SUBQUERIES IN THE FROM CLAUSE</b></h3>
        <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
            Suppose you have a very large table that takes a long time to run a basic query. To help speed things up, we can create a subquery in the FROM clause and query that subquery. As mentioned above, this type of subquery has the following stipulations:
            <ul style="margin-left:110px;">
                <li style="line-height:25px;">The base query can only select columns from the columns declared in the subquery.</li>
                <li style="line-height:25px;">If you aliased any columns in the subquery, you must use those aliases in the base query.</li>
            </ul>
        <h4 style="margin-left:99px;font-size:22px;"><b>Example</b></h4>
        <p style="text-align:justify;padding-left:100px;padding-right:0px;font-size:16px;line-height:25px;">
        &ensp;&ensp;&ensp;SELECT reportID, storeName, totalSales, foodSales, cleaningSales, clothingSales, storeID<br>
        &ensp;&ensp;&ensp;FROM <b>(SELECT salesReport.*, stores.storeName FROM salesReports<br>
        &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;JOIN stores ON salesReports.storeID = stores.storeID<br>
        &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;WHERE storeName LIKE '%Q%')</b> AS namedReports;
        </p>
    </p>
        <h4 style="margin-left:99px;font-size:22px;margin-top:0px;padding-top:0px;"><b>Output</b></h4>
            <img style="margin-left:99px;" src="Images/fromsubex.jpg">
        </p><br>
        </section>
        </div>

                                                         <!-- Where Clause -->
    <div class="wrapperTutorials" style="width:1200px;">
    <section>
        <h3 style="margin-left:99px;font-size:30px;"><b>SUBQUERIES IN THE WHERE CLAUSE</b></h3>
        <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        This is by far the most common use case of subqueries. Subqueries in the WHERE clause are used to reference either a pre-created list of conditions or compare the results of the base query with the results of the subqueries. As mentioned above, this type of subquery has the following stipulations:</p>
        <ul style="margin-left:110px;">
            <li style="line-height:25px;">The subquery must contain only a single column.</li>
            <li style="line-height:25px;">If you;re using an aggregate in the subquery to compare the value of a column specified in the base query and the subquery, you must use the WHERE clause in the subquery to create the join.</li>
        </ul>
        <h4 style="margin-left:99px;font-size:22px;"><b>Example</b></h4>
        <p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">
        &ensp;&ensp;&ensp;SELECT reportID, storeName, SUM(foodSales) foodSales<br>
        &ensp;&ensp;&ensp;FROM salesReports reports<br>
        &ensp;&ensp;&ensp;JOIN stores ON reports.storeID = stores.storeID<br>
        &ensp;&ensp;&ensp;WHERE storeName IN <b>(SELECT storeName FROM stores WHERE storeName IN('T-Mart', 'G-Mart', 'M-Mart'))</b>
        <h4 style="margin-left:99px;font-size:22px;"><b>Output</b></h4>
        <img style="margin-left:99px;" src="Images/wheresubex.jpg">
            </p><br>
        </section>
        </div>


                                                        <!-- Next Steps -->
    <div class="wrapperTutorials" style="width:1200px;">
        <section>
        <h3 style="margin-left:99px;font-size:22px;"><b><u>Next Steps</u></b></h3><p style="text-align:justify;padding-left:100px;padding-right:100px;font-size:16px;line-height:25px;">Subqueries can be very difficult to read. Especially when you have in excess of 100 lines of code. A much more simple and efficient way to write subqueries is noted in the next tutorial:<br>
            <a href="CTEs.html" style="text-decoration:none;color:black;font-weight:bolder;">- CTEs Tutorial  (Click here)</a>
        </p>
        </section>
        </div>
        </p>


    
</html>