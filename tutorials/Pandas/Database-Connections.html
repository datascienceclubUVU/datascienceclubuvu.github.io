<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Font (IBM Plex Sans Condensed) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet"
    >

    <!-- Bootstrap (5.2.3) -->
    <link rel="stylesheet" href="../../css/bootstrap.css">  <!-- %UPDATE% -->
    <script defer src="../../js/bootstrap.bundle.min.js"></script>  <!-- %UPDATE% -->

    <!-- Favicon. -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="../../css/website-base.css">  <!-- %UPDATE% -->
    <title>Pandas Tutorials: Working with Databases</title>
</head>
<body>
    <!-- Header for title of webpage. -->
    <header class="container-fluid">
        <div class="row py-4 bg-primary">
            <h1 class="col text-center text-white">
                PANDAS TUTORIALS
            </h1>
        </div>
    </header>
    <!--- Navigation banner. -->
    <nav class="navbar navbar-expand-lg sticky-top py-0 navbar-dark bg-secondary">
        <!-- Container for entire navbar. -->
        <div class="container-fluid justify-content-end px-1">
            <!-- Hamburger menu that appears when screen gets smaller. -->
            <button class="navbar-toggler my-1" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Container for navbar items. -->
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item mx-4">
                        <a class="nav-link text-center" href="../../index.html">Home</a>  <!-- %UPDATE% -->
                    </li>
                    <li class="nav-item mx-4">
                        <a class="nav-link text-center" href="../../tutorials.html">Tutorials</a>  <!-- %UPDATE% -->
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Outer wrapper for main content. -->
    <div class="container-fluid" id="contentWrapper">
        <div class="row">
            <div class="col-md-1 col-lg-2 col-xxl-3"></div>
            <!-- Container for main content. -->
            <div class="col-12 col-md-10 col-lg-8 col-xxl-6 my-md-4 py-3 py-sm-4 px-0 px-sm-3 bg-white">
                <section class="container-fluid">
                    <!-- Title. -->
                    <div class="row">
                        <h2 class="col mb-3 mx-2 mx-sm-1 text-start border-start border-3 border-secondary text-primary">
                            Pandas Tutorials: Working with Databases
                        </h2>
                    </div>
                    <!-- Title/image. -->
                    <div class="row">
                        <div class="d-flex justify-content-center">
                            <img
                                class="img-fluid"
                                src="../../imgs/pandas-databases.webp"
                                alt="[Enter image here]"
                                width=100%
                            >  <!-- %UPDATE% -->
                        </div>
                    </div>
                    <!-- Description. -->
                    <div class="row mt-2 mb-3">
                        <div class="col">
                            <h5><b>DISCLAIMER: Before starting this tutorial, you should have a basic knowledge of Relational Databases and SQL.</b></h5>
                            <p class="pt-2">
                                Text Files are great for when you are getting started with Pandas or working on a small-scale Data Science project. However, once you start collecting data on a regular basis, you'll need a database. This tutorial will cover the following learning objectives:
                            </p>
                            <ul>
                                <li>How to Use SQLAlchemy with Pandas</li>
                                <li>How to Execute a SQL Query Against a Database with Pandas</li>
                                <li>How to Output a DataFrame as a Database Table</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Use SQLAlchemy with Pandas</h2> <br>
                        <iframe width="650" height="400" src="https://www.youtube.com/embed/M-4EpNdlSuY?start=0&end=136" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><br>
                        <h4 class="pt-4">Summary</h4>
                        <ul>
                            <li class="pt-1">The <b><i>SQLAlchemy</i></b> library is a popular tool to connect Relational Databases to Python via an API. The most popular database supported by this library are MySQL, PostgreSQL, and Oracle.</li>
                            <li class="pt-2">Before getting started with SQLAlchemy, you'll need to install it into your local environment AND the database driver. Run the following code to get started: <br>
                                <code>pip install sqlalchemy</code><br><br>
                                <b>MySQL:</b><br>
                                <code>pip install pymysql</code><br><br>
                                <b>PostgreSQL:</b><br>
                                <code>pip install psycopg2</code></li>
                            <li class="pt-2">Once you have the correct libraries installed, you need to create the connection string for the connection engine. Run the following code to continue: <br>
                                <code>from sqlalchemy import create_engine</code><br><br>
                                <b>MySQL:</b><br>
                                <code>engine = create_engine('mysql+pymysql://[username]:[password]@localhost:3306/[database_name]')</code><br><br>
                                <b>PostgreSQL:</b><br>
                                <code>engine = create_engine('postgresql+psycopg2://[username]:[password]@localhost:5432/[database_name]')</code></li>

                            <li class="pt-2"><b>NOTE:</b> If the file you want to use is not in your working directory, you'll need to specify either the Absolute or Relative file path.</li>
                            </ul>
                    <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Execute a SQL Query Against a Database with Pandas</h2> <br>
                    <iframe width="650" height="400" src="https://www.youtube.com/embed/M-4EpNdlSuY?start=137&end=345" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><br>
                    <h4 class="pt-4">Summary</h4>
                    <ul>
                        <li class="pt-2">When you have established the connection to your database, the <b><i>read_sql_table</i></b> mathod can be used to view the contents of a table (SQL Equivalent: <b>SELECT * FROM table</b>). This is used with the following syntax: <br>
                            <code>pd.read_sql_table('table_name', con=[engine_variable])</code></li>
                        <li class="pt-2">The <b><i>read_sql_table</i></b> method also contains a parameter that lets you specify the columns to return from the table (SQL Equivalent: <b>SELECT [columns] FROM table</b>). This is used with the following syntax: <br>
                            <code>pd.read_sql_table('table_name', con=[engine_variable], columns=['column1', 'column2', 'column3'])</code></li>
                        <li class="pt-2">The <b><i>read_sql_query</i></b> method is used to run a raw SQL query against a database connection. This method is used with the following syntax: <br>
                            <code>pd.read_sql_query('enter query here', con=[engine_variable])</code></li>
                        <li class="pt-2"><b>NOTE: </b>Although the <b><i>read_sql_query</i></b> works when reading a running a raw SQL query against a database connection, the <b><i>read_sql</i></b> method is much simpler and more commonly used. This method has the same syntax as the <b><i>read_sql_query</i></b> method.</li>
                        </ul>
                    <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Convert a JSON File into a DataFrame</h2> <br>
                    <iframe width="650" height="400" src="https://www.youtube.com/embed/cL545kw0FnA?end=268" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></iframe><br><br>
                    <h4 class="pt-4">Summary</h4>
                    <ul>
                        <li class="pt-1"><b><i>JSON</i></b>, JavaScript Object Notation, is a lightweight format for storing and transporting data across the web. It's formatted as a list of key-value pairs and arrays (nested dictionaries).</li>
                        <li class="pt-2">The <b><i>read_json</i></b> method is used to convert a JSON file into a DataFrame. This process is also known as <b><i>Flattening.</i></b></i> The style of JSON used below is known as "column" style. This method is used with the following syntax: <br><br>
                            <b>Sample Format:</b><br>
                            <code>data = {<br>
                                &ensp;&ensp;&ensp;"Column1": {"0":"row1_value1", "1":"row2_value1"},<br>
                                &ensp;&ensp;&ensp;"Column2": {"0":"row1_value2", "1":"row2_value2"},<br>
                                &ensp;&ensp;&ensp;"Column3": {"0":"row1_value3", "1":"row2_value3"}<br>
                            }
                            </code><br><br>
                            <b>Syntax:</b><br>
                            <code>pd.read_json('file_name.json')</code><br>
                            <b>OR</b><br>
                            <code>pd.read_json('file_name.json', orient='columns')</code></li>
                        <li class="pt-2">If the JSON file you're reading is in a "split" format, see example below, use the following syntax: <br><br>
                            <b>Sample Format:</b><br>
                            <code>data = { <br>
                            &ensp;&ensp;&ensp;"index":["0", "1"],<br>
                            &ensp;&ensp;&ensp;"columns":["Column1", "Column2", "Column3"], <br>
                            &ensp;&ensp;&ensp;"data":["row1_value1", "row1_value2", "row1_value3"], <br>
                            &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;["row2_value1" "row2_value2", "row2_value3"]<br>
                            &ensp;&ensp;]<br>
                            }<br><br></code>
                            <b>Syntax:</b><br>
                            <code><b>pd.read_json('file_name.json', orient='split')</b></code></li>
                        <li class="pt-2">If the JSON file you're reading is in a "Index" format, see example below, use the following syntax: <br><br>
                            <b>Sample Format:</b><br>
                            <code>data = { <br>
                            &ensp;&ensp;&ensp;"0":{"Column1":"row1_value1", "Column2":"row1_value2", "Column3":"row1_value3"},<br>
                            &ensp;&ensp;&ensp;"1":{"Column1":"row2_value1", "Column2":"row2_value2", "Column3":"row2_value3"}, <br>
                            &ensp;&ensp;&ensp;"2":{"Column1":"row3_value1", "Column2:"row3_value2", "Column3":"row3_value3" }, <br>
                            }<br><br></code>
                            <b>Syntax:</b><br>
                            <code><b>pd.read_json('file_name.json', orient='index')</b></code></li>
                        <li class="pt-2">If the JSON file you're reading is in a "Records" format, see example below, use the following syntax: <br><br>
                            <b>Sample Format:</b><br>
                            <code>data = { <br>
                            &ensp;&ensp;&ensp;{"Column1":"row1_value1", "Column2":"row1_value2", "Column3":"row1_value3"},<br>
                            &ensp;&ensp;&ensp;{"Column1":"row2_value1", "Column2":"row2_value2", "Column3":"row2_value3"}, <br>
                            &ensp;&ensp;&ensp;{"Column1":"row3_value1", "Column2:"row3_value2", "Column3":"row3_value3"}, <br>
                            }<br><br></code>
                            <b>Syntax:</b><br>
                            <code><b>pd.read_json('file_name.json', orient='records')</b></code></li>
                        <li class="pt-2">If the JSON file you're reading is in a "Values" format, see example below, use the following syntax: <br><br>
                            <b>Sample Format:</b><br>
                            <code>data = [ <br>
                            &ensp;&ensp;&ensp;["row1_value1", "row1_value2", "row1_value3"],<br>
                            &ensp;&ensp;&ensp;["row2_value1", "row2_value2", "row2_value3"], <br>
                            &ensp;&ensp;&ensp;["row3_value1", "row3_value2", "row3_value3"], <br>
                            ]<br><br></code>
                            <b>Syntax:</b><br>
                            <code><b>pd.read_json('file_name.json', orient='values')</b></code></li>
                        <li class="pt-2"><b>NOTE:</b> When slicing values in Python, use the following notation: <code>starting_value:ending_value.</code> If you want to slice values in reverse, use the following notation: <code>starting_value:ending_value:-1</code></li>
                        </ul>
                        <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary">How to Export a DataFrame into Another File Format</h2> <br>
                        <h6><b>Export DataFrame to CSV File</b></h6>
                        <iframe width="650" height="400" src="https://www.youtube.com/embed/ZftcMsvhE48?end=274" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> <br><br>
                        <h6><b>Export DataFrame to JSON File</b></h6>
                        <iframe width="650" height="400" src="https://www.youtube.com/embed/6L6whtUm82Y?start=157&end=184" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><br>
                        <h4 class="pt-4">Summary:</h4>
                        <ul>
                            <li class="pt-1">The <b><i>to_csv</i></b> method is used to export a DataFrame to a CSV File. This is used with the following syntax: <br>
                                <code>dataframe.to_csv('file_name.csv')</code></li>
                            <li class="pt-2">While working with DataFrames, Indices can be useful in ensuring you have no duplicates in your data and conducting various data quality checks. However, once you export your DataFrame, the Index doesn't provide much of a benefit. Thus, it's usually wise to not include the index. To exclude the Index when exporting a DataFrame to a CSV File, use the following syntax: <br>
                                <code>dataframe.to_csv('file_name.csv', index=False)</code></li>
                            <li class="pt-2">When appending a DataFrame to an existing CSV file, you shouldn't include the column headers as those would already be included in the file. To exclude column headers when uploading a DataFrame to a CSV file, use the following syntax: <br>
                                <code>dataframe.to_csv('file_name.csv', headers=False)</code><br></li>
                            <li class="pt-2">The <b><i>to_json</i></b> method is used to export a DataFrame to a JSON File. Just like in the <b><i>read_json</i></b> method, you can specify how you would like to orient the JSON data using the <b><i>orient</i></b> parameter. This is used with the following syntax: <br>
                                <code>dataframe.to_json('file_name.json', orient='orientation')</code></li>
                            </ul><br>
                            <h2 class="mt-5 px-4 px-sm-3 border-start border-3 border-secondary" id="exercise">Exercise</h2>
                            <p><b>Congratulations!</b> You just completed the Working with Text Files Tutorial! To help test your knowledge, let's
                                practice Reading and Writing some Text Files into and from DataFrames.</i></b>
                                </i></b>
                                <br>**<b><i>It's highly recommended that you
                                    complete the exercise outlined in the previous tutorial before beginning this exercise.**</i></b>
                            </p>
                            <h4 class="pt-3">Instructions:</h4>
                            <ol>
                                <li class="pt-2">Open your IDE (e.g., VS Code, PyCharm, Spyder).</b></li>
                                <li class= "pt-2">Create a New Jupyter Notebook, or similar Notebook Environment. Name it "text-files.ipynb"</li>
                                <li class="pt-2">In the Notebook, complete the following tasks:</li>
                                <ol type="a">
                                    <li class="pt-2"><b>Download the Following Files:</b> <br>
                                        <ul>
                                            <li><a href="./Exercise Files/unclean_listings.xlsx">Sample Excel Workbook</a></li>
                                            <li><a href="./Exercise Files/unclean_listings.csv">Sample CSV File</a></li>
                                            <li><a href="./Exercise Files/unclean_listings.json">Sample JSON File</a></li>
                                        </ul></li>
                                    <li class="pt-2"><b>Read the Excel Workbook into a DataFrame object named "unclean_listings_excel"</b></li>
                                    <li class="pt-2"><b>Read the CSV File into a DataFrame Object named "unclean_listings_csv"</b></li>
                                    <li class="pt-2"><b>Read the JSON File into a DataFrame Obejct named "unclean_listings_json"</b></li>
                                    <li class="pt-2"><b>Export the "unclean_listings_excel" variable to a CSV file named "converted_listings.csv". Exclude the index.</b></li>
                                    <li class="pt-2"><b>Export the "unclean_listings_json" variable to a JSON file named "converted_listings.json". Orient the data to "Split" format.</b></li>
                                </ol>
                                <li class="pt-4"><b>Exercise Completed! Click <a href="./Text-Files-Answer-Key.html">here</a> to view the answers.</b></li>
                                <div class="col">
                                    <p class="pt-4">Have any issues with the above exercise? Post your question on Discord!</p>
                                </div>
                            </ol>
                        <!-- Previous/Next Topic buttons. -->
                        <div class="row mt-4 mt-md-5 mb-2 px-3">
                            <a
                                class="col-12 col-sm-4 btn btn-outline-primary mb-3 mb-sm-0 py-2 fs-5"
                                href="./Dataframe-Functions.html">
                                Previous Topic
                            </a>
                           <div class="col-0 col-sm-4"></div>
                            <a
                                class="col-12 col-sm-4 btn btn-outline-primary py-2 fs-5"
                                href="./Database-Connections.html">
                                Next Topic
                            </a>
                        </div>
                </section>
            </div>
            <div class="col-md-1 col-lg-2 col-xxl-3"></div>
        </div>
    </div>
    <!-- Footer at bottom of page. -->
    <footer class="container-fluid bg-secondary">
        <div class="row align-items-center h-100">
            <h4 class="col m-0 text-center text-white">
                © 2023 Data Science Club @ UVU
            </h4>
        </div>
    </footer>
</body>
</html>
